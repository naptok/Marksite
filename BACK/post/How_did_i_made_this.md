# [introduction](http://github.com/liber31/introduction)

## Starting / ì‹œì‘í• ë•Œ

ì‹œê°„ì´ ëŠ˜ ë¶€ì¡±í•œ ë‚˜ëŠ” ê°€ë³ê³ , ë¹ ë¥´ë©°, ê°œë°œí•˜ëŠ”ë°ì— ìˆì–´ì„œ ë¬´ë¦¬ê°€ ì—†ëŠ” ì„ ì—ì„œ ë‚˜ë¥¼ ì†Œê°œí•  ìˆ˜ ìˆëŠ” ë‚˜ë§Œì˜ ì‚¬ì´íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ê³  ì‹¶ì—ˆë‹¤.  

ê·¸ë ‡ê²Œ í›„ë³´ë¡œ ë½‘ì€ ê²ƒë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  

* nodeJS
* Go
* Python  

Go ëŠ” ë‚´ê°€ ì²˜ìŒ ì ‘í•´ë³´ëŠ” ì–¸ì–´ë¼ ì§§ì€ ì‹œê°„ë‚´ì— í™ˆí˜ì´ì§€ë¥¼ ë§Œë“ ë‹¤ëŠ” ê²ƒì€ êµ‰ì¥í•œ ë¬´ë¦¬ì™€ ë¶ˆê°€ëŠ¥ì´ë¯€ë¡œ íŒ¨ìŠ¤.  

Python ì€ ë‚´ ì½”ë”© ìŠ¤íƒ€ì¼ê³¼ ì˜ ë§ì§€ ì•Šì•„ í‰ì†Œì—ë„ ê¸°í”¼í•˜ë˜ ì–¸ì–´ë¼ íŒ¨ìŠ¤.  

ë‹µì€ **nodeJS** ë‹¤..! 

ê·¼ë° ë¬´ì‘ì • ë§Œë“œë ¤ê³  í•˜ë‹¤ë³´ë‹ˆ ë„ˆë¬´ ë§‰ë§‰í•˜ë‹¤ğŸ’¦  

ê·¸ëŸ´ë“¯í•œ ì›¹ì„ ë§Œë“¤ì–´ë³´ëŠ” ê±´ ì´ë²ˆì´ ì²˜ìŒì´ë¼ ê·¸ëŸ°ì§€ ë­˜ ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ì „í˜€ ê°ì´ ì•ˆì˜´.  



## Searching / ì‚¬ì „ ì¡°ì‚¬

ë¬´ì—‡ì´ ë˜ì—ˆë“  ì‹œì‘í•˜ê¸° ì „ì— ë¯¸ë¦¬ ì¡°ì‚¬ë¥¼ í•´ë³¸ë‹¤ëŠ” ê²ƒì€ ì •ë§ ì¢‹ì€ í–‰ìœ„ì´ë‹¤.

nodeJS ë¡œ ë§Œë“¤ê¸°ë¡œ ì •í–ˆìœ¼ë‹ˆ ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ, "ì–´ë–¤ ëª¨ë“ˆê³¼ í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ì—¬ ë§Œë“¤ë©´ ë ì§€" ì™€ "ì›¹ ì‚¬ì´íŠ¸ ë””ìì¸ì€ ì–´ë–»ê²Œ í• ì§€"ë¥¼ ì•Œì•„ë³´ê¸° ì‹œì‘í–ˆë‹¤. 

ì´ë²ˆì— ë§Œë“¤ ì›¹ ê°œë°œì— í• ì—¬í•œ ì‹œê°„ì€ ëŒ€ëµ 4ì‹œê°„ ì •ë„ì—¬ì„œ, ì´ì „ì— ì‚¬ìš©í•´ë³¸ ì¹œêµ¬ì„ ì“°ëŠ”ê²Œ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

* Express
* Markdown
* serve-favicon
* github-markdown-css

Express ë¡œ ê¸°ë³¸ì ì¸ ì›¹ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê³ , Markdown ë¥¼ ì´ìš©í•˜ì—¬ md ë¬¸ì„œë“¤ì„ html ë¬¸ì„œë“¤ë¡œ ë³€í™˜,  
css íŒŒì¼ë¡œ ë””ìì¸ì„ í•˜ë©´ ì‰½ê²Œ ëë‚  ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì— ìœ„ ë¼ì¸ì—…ì„ êµ¬ì„±í•˜ì˜€ë‹¤.



## Development / ê°œë°œ

* Project
  * README.md
  * .git
  * /source
    * /img
    * /post
    * 404.html
    * footer.html
    * about.md
    * contact.md
    * prologue.md
    * github-markdown.css
    * main.js

ë¨¼ì € í”„ë¡œì íŠ¸ í´ë” êµ¬ì„±ì„ ê¸°íší•´ë³´ì•˜ë‹¤.  

* Prologue
* Posts
* Contact
* About

ë©”ë‰´ì—ëŠ” ì´ 4ê°œì˜ ì¹´í…Œê³ ë¦¬ê°€ ë“¤ì–´ê°€ë„ë¡ ì„¤ê³„í•˜ì˜€ë‹¤.  
ê°ê°ì˜ ì¹´í…Œê³ ë¦¬ëŠ” ê°ê°ì˜ .md ë¬¸ì„œë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©° Posts ì¹´í…Œê³ ë¦¬ë§Œ ë”°ë¡œ ë‹¤ìˆ˜ì˜ .md ë¬¸ì„œë¥¼ ê°€ì§€ê³  ìˆëŠ” í˜•ì‹ì´ë‹¤.

```html
// HTML preset
var head = `<head><title>Fumesoft</title><meta name="viewport" content="width=device-width, initial-scale=1"><link href="/github-markdown.css" rel="stylesheet"></head>`
```

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” ë‹¤ë¥¸ í”„ë¡ íŠ¸ì—”ë“œ í”„ë ˆì„ì›Œí¬ë¥¼ ì „í˜€ ì‚¬ìš©í•˜ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì—, html ê³¼ css ë¥¼ ì§ì ‘ êµ¬ì„±í•´ì„œ ì‚¬ìš©ìì—ê²Œ ë„˜ê²¨ì£¼ì–´ì•¼í•œë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ìœ„ì²˜ëŸ¼ ë¯¸ë¦¬ html ë¬¸ì„œ í”„ë¦¬ì…‹ì„ ë§Œë“¤ì–´ë‘ê³  ëª¨ë“  router ì—ì„œ ì´ë¥¼ ê³µìœ í•˜ë©° ì‚¬ìš©í•œë‹¤.



### Navigation / ë©”ë‰´ë°”

#### HTML

```javascript
// Get html sources
function LoadHTML (type) {
  switch (type) {
    case 'post':
      // #region inside
      navigation = `
      <ul class="topnav">
      <li><a href="/">Prologue</a></li>
      <li><a class="active" href="/post/main.md">Posts</a></li>
      <li><a href="/contact">Contact</a></li>
      <li class="right"><a href="/about">About</a></li>
      </ul>
      `
      // #endregion
      break

    case 'prologue':
      // #region inside
      navigation = `
      <ul class="topnav">
      <li><a class="active" href="/">Prologue</a></li>
      <li><a href="/post/main.md">Posts</a></li>
      <li><a href="/contact">Contact</a></li>
      <li class="right"><a href="/about">About</a></li>
      </ul>
      `
      // #endregion
      break

    case 'contact':
      // #region inside
      navigation = `
      <ul class="topnav">
      <li><a href="/">Prologue</a></li>
      <li><a href="/post/main.md">Posts</a></li>
      <li><a class="active" href="/contact">Contact</a></li>
      <li class="right"><a href="/about">About</a></li>
      </ul>
      `
      // #endregion
      break

    case 'about':
      // #region inside
      navigation = `
      <ul class="topnav">
      <li><a href="/">Prologue</a></li>
      <li><a href="/post/main.md">Posts</a></li>
      <li><a href="/contact">Contact</a></li>
      <li class="right"><a class="active" href="/about">About</a></li>
      </ul>
      `
      // #endregion
      break
  }
}
```

í˜„ì¬ router ì—ì„œ ì–´ë–¤ í˜ì´ì§€ë¥¼ ë³´ê³  ìˆëŠ”ì§€ë¥¼ argument ê°’ìœ¼ë¡œ ë°›ì•„ì™€ switch ë¬¸ìœ¼ë¡œ ì•Œë§ëŠ” ë°ì´í„°ë¥¼ ëŒë ¤ì¤€ë‹¤.

#### CSS

```css
ul.topnav {
  font-family: octicons-link;
  font-size: 14px;
  list-style-type: none;
  margin: 0px auto;
  border: 0px;
  padding: 0;
  padding-left: 10px;
  overflow: hidden;
  background-color: #333;
  left:0px;
  top:0px;
  position: fixed;
  width:100%;
}

ul.topnav li {float: left;}

ul.topnav li a {
  display: block;
  color: white;
  text-align: center;
  padding: 10px 12px;
  text-decoration: none;
}

ul.topnav li a:hover:not(.active) {background-color: #111;}

ul.topnav li a.active {background-color: #4CAF50;}

ul.topnav li.right {float: right; padding-right: 10px;}

.MarginOfNavigation {
  height: 38px;
}

@media screen and (max-width: 767px) {
  ul.topnav li.right, 
  ul.topnav li {float: none; padding-right: 0px; }
  ul.topnav { padding-left: 0px; position: relative; }
  .MarginOfNavigation { height: 0px; }
}
```

ê³§ ì´ì–´ css ë””ìì¸ì„ í•œë‹¤.

ì§™ì€ íšŒìƒ‰ ê²€ì€ ë°”ì— ì´ˆë¡ìƒ‰ ë²„íŠ¼ì„ ê°€ë¡œë¡œ ë°°ì—´í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë§Œë“¤ì—ˆëŠ”ë°, ëª¨ë°”ì¼ì—ë„ ëŒ€ì‘ì„ í•´ì•¼í•˜ê¸°ì— ì¼ì • ìˆ˜ì¤€ ì´í•˜ë¡œ ìœˆë„ìš° ê°€ë¡œ ê¸¸ì´ê°€ ì¤„ì–´ë“¤ë•Œ ì„¸ë¡œë¡œ ì¬ë°°ì—´í•˜ëŠ” ê¸°ëŠ¥ë„ ì¶”ê°€í•˜ì˜€ë‹¤.

```css
position:fixed;
```

navigation ë°”ì˜ ìœ„ì¹˜ë¥¼ ê³ ì •ì‹œí‚¤ê¸° ìœ„í•´ì„œ ìœ„ ì½”ë“œë¥¼ ì‚¬ìš©í•´ë³´ë‹ˆ, ë‹¤ë¥¸ ê°ì²´ë“¤ì´ navigation ë°”ê°€ ì²˜ìŒë¶€í„° ë”°ë¡œ ë–¨ì–´ì ¸ í–‰ë™í•˜ëŠ” ê²ƒì²˜ëŸ¼ ìœ„ë¡œ ê³µê°„ì„ ë‹¹ê²¨ë²„ë ¤ì„œ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì•¼ë§¤ë¡œ

```css
.MarginOfNavigation {
  height: 38px;
}
```

navigation ë°” ë°‘ì— ë§ˆì§„ì„ ì£¼ëŠ” ìš©ë„ì˜ ê°œì²´ë¥¼ ë‘ê³  ë‹¤ë¥¸ ê°œì²´ë“¤ì„ ë°€ì–´ë²„ë¦¬ë„ë¡ í•˜ì—¬ í•´ê²°í•˜ì˜€ë‹¤.



### Prologue / ë¨¸ë¦¿ë§

```javascript
// Prologue router
app.get('/', (req, res) => {
})
```

ì‚¬ì´íŠ¸ì— ì ‘ì†í•˜ë©´ ê°€ì¥ ë¨¼ì € ë³´ì´ê²Œ í•  í˜ì´ì§€ëŠ” **prologue.md** ì´ê¸°ì—, **/** ìœ„ì¹˜ì— prologue.md ë¥¼ ì—°ê²°í•œë‹¤.

ë‹¤ìŒìœ¼ë¡œ í•´ì•¼í•  ê²ƒì€ .md ë¬¸ì„œë¥¼ html ë¬¸ì„œë¡œ ë³€í™˜í•œ ìœ„ì—ì„œ ë¯¸ë¦¬ ë§Œë“¤ì–´ë‘” í”„ë¦¬ì…‹ê³¼ ì„ì–´ì„œ í´ë¼ì´ì–¸íŠ¸ì— ë³´ë‚´ì£¼ëŠ” ê²ƒì´ë‹¤.

* markdown
* markdown-it

ì´ ë•Œë¬¸ì— .md ë¬¸ì„œë¥¼ html ë¬¸ì„œë¡œ ë³€í™˜í•´ì£¼ëŠ” ëª¨ë“ˆì„ 2ê°œ ì‚¬ìš©í•´ë³´ì•˜ëŠ”ë°, markdown ê³¼ markdown-it ë‘˜ë‹¤ ë¬¸ì œ ì—†ì´ ëŒ€ì²´ë¡œ ì˜ ì‘ë™í•˜ì˜€ì§€ë§Œ íŠ¹ìˆ˜í•œ ê²½ìš°ì—ì„œ ëª‡ëª‡ ë¶€ë¶„ ë³€í™˜ì´ ì´ìƒí•˜ê²Œ ë˜ëŠ” markdown ëª¨ë“ˆì€ ê±°ë¥´ê³  markdown-it ëª¨ë“ˆì„ ì‚¬ìš©í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.

```javascript
const Markdownit = require('markdown-it')
var markdown = new Markdownit()
markdown.render('.md file string data')
```

.md ë¥¼ htmlë¡œ ë³€í™˜í•˜ëŠ”ê±´ ì˜ˆìƒì™¸ë¡œ ì •ë§ ê°„ë‹¨í–ˆë‹¤.

ëª¨ë“ˆì„ ë“¤ê³  ì˜¨ ë‹¤ìŒ render í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë³€í™˜ ë. ì´ì œ ë³€í™˜ëœ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ì˜ ì¡°í•©í•˜ì—¬ ì›¹ í´ë¼ì´ì–¸íŠ¸ë¡œ ë¿Œë ¤ì¤„ì§€ê°€ ë¬¸ì œê°€ ëœë‹¤.

```javascript
// GET Navigation data
LoadHTML('prologue')

// Send "prologue.md"
fs.readFile(path.join(__dirname, '/prologue.md'), 'utf8', (error, data) => {
  if (error) {
    // ì—ëŸ¬ê°€ ë‚¬ì„ ê²½ìš°ë¥¼ ëŒ€ë¹„
  	res.writeHead(400, { 'content-Type': 'text/html; charset=utf-8' })
    res.end(notfound)
  } else {
    // HTML START --
    html = '<html>'
    html += head
    
    // Body Start --
    html += '<body>'
    html += navigation
    html += '<div class="MarginOfNavigation"></div>'
    html += `<article class="markdown-body">${markdown.render(data)}</article>`
    html += '</body>'

    // Footer Start --
    html += `<footer>${footer}</footer>`

    // HTML END --    
    html += '</html>'

    res.writeHead(200, { 'content-Type': 'text/html; charset=utf-8' })
    res.end(html)
  }
})
```

fs ëª¨ë“ˆì„ ì´ìš©í•˜ì—¬ í”„ë¡¤ë¡œê·¸ ë¬¸ì„œë¥¼ ë¶ˆëŸ¬ ì˜¨ ë‹¤ìŒ html ë¡œ ë³€í™˜. ì´í›„ ë¯¸ë¦¬ ë§Œë“¤ì–´ ë‘” í”„ë¦¬ì…‹ê³¼ ì¡°í•©í•œë‹¤.

### Posts / ê¸€ë“¤

#### Post list

```javascript
function LoadPost () {
  var ev = fs.readdirSync(path.join(__dirname, '/post'))
  var text = ''
  for (var i = 0; i < ev.length; i++) {
    var file = ev[i]
    if (file.replace(/.*\./gi, '') === 'md') {
      text += `<li><a href="${path.join('/post/', file)}">â”” ${file.split('.md')[0]}</a></li>`
    }
  }
  return text
}
```

post í´ë” ì† ë‹¤ìˆ˜ì˜ .md ë¬¸ì„œë“¤ì´ ìˆëŠ” êµ¬ì¡°ì´ê³ , ì´ë¥¼ ë¦¬ìŠ¤íŠ¸ë¡œ ì •ë¦¬í•œ ë‹¤ìŒ ë³´ì—¬ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— fs ëª¨ë“ˆì˜ readdirSync í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ ë¬¸ì„œ ë°ì´í„°ë¥¼ ì „ë¶€ ë“¤ê³ ì˜¨ í›„ html íƒœê·¸ë¡œ ë³€í™˜í•œë‹¤.

```html
// Body Start --
html += '<body>'
html += navigation
html += '<div class="MarginOfNavigation"></div>'
html += `<a class="post" onclick="this.nextSibling.style.display=(this.nextSibling.style.display=='none')?'block':'none';" href="javascript:void(0)"> ê¸€ ëª©ë¡<br/></a><div style="DISPLAY: none"><ul class="post">`
html += `${LoadPost()}</ul></div><hr class="post"/><article class="markdown-body">${markdown.render(data)}</article>`
html += '</body>'
```

ë³€í™˜ëœ ë°ì´í„°ë¥¼ body íƒœê·¸ì— ì¶”ê°€í•œë‹¤.

#### Post routing

```javascript
// -- img
localhost:8080/img/a.png
localhost:8080/img/favicon.ico

// -- post
localhost:8080/post/main.md
localhost:8080/post/development.md

// ------------------------------------

// Post router
app.get('/post/*', (req, res) => {
  // ì½”ë“œ
})

// Image router
app.get('/img/*', (req, res) => {
  // ì½”ë“œ
})
```

imgì™€ post í´ë” ë‚´ì— ìˆëŠ” ëª¨ë“  íŒŒì¼ë“¤ì€ ìœ„ ì£¼ì†Œë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ ë¼ìš°íŒ… ì²˜ë¦¬ë¥¼ í•œë‹¤.

ìœ„ì—ì„œë„ ë‚˜ì˜¨ ì½”ë“œì´ê¸° ë•Œë¬¸ì— ì„¤ëª…ì€ ìƒëµí•œë‹¤.



### Contact, About

Prologue ì™€ ë™ì¼í•˜ê²Œ ê°ê° í•´ë‹¹ë˜ëŠ” .md ë¬¸ì„œë¥¼ ë¡œë“œí•˜ë„ë¡ ë§Œë“¤ì—ˆë‹¤.



## After / ë§Œë“  ì´í›„

ë§¤ìš° ê°€ë³ê³ , ê°„ë‹¨í•˜ë©°, ì‹¬í”Œí•œ ì›¹ í™ˆí˜ì´ì§€ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê²Œ ë˜ì–´ ì •ë§ ê¸°ë¶„ì´ ì¢‹ì•˜ë‹¤.

ê·¼ë°, ë§¤ë²ˆ ì„œë²„ì— ìˆëŠ” .md ë¬¸ì„œë¥¼ ìˆ˜ì •í•˜ê³  ì»¤ë°‹ì„ ì˜¬ë¦° ë‹¤ìŒ, ì„œë²„ì—ì„œ í’€ë§í•˜ê³  ì‹¤í–‰í•˜ê¸°ì—ëŠ” ë„ˆë¬´ ê·€ì°®ìŒì´ ê°•ë ¬í–ˆë‹¤.

ê·¸ë˜ì„œ, ì»¤ë°‹ì„ ë‚ ë¦¬ë©´ ìë™ìœ¼ë¡œ í’€ë§ì„ í•˜ì—¬ ì„œë²„ì— ì‹¤ì‹œê°„ìœ¼ë¡œ ë°˜ì˜í•˜ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆë‹¤. - [HotReload](https://github.com/liber31/HotReload)

### Structure of HotReload

```javascript
const http = require('http')
const url = require('url')
const exec = require('child_process').exec

http.createServer((req, res) => {
  var pathname = url.parse(req.url).pathname
	if (pathname !== '/favicon.ico') {
		fs.stat(`./Git/${repo}`, err => {
      if (!err) {
        // ì¡´ì¬í•˜ëŠ” ë ˆí¼ì§€í† ë¦¬
        exec(`git pull`, { cwd: `./Git/${repo}` }, (err, stdout, stderr) => {
          if (err) {
            console.log(err)
            res.writeHead(200, { 'Content-Type': 'application/json' })
            return res.end(JSON.stringify({ 'success': true }))
          } else {
            res.writeHead(200, { 'Content-Type': 'application/json' })
            return res.end(JSON.stringify({ 'success': true }))
          }
        })
      } else if (err.code === 'ENOENT') {
        // ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë ˆí¼ì§€í† ë¦¬
        exec(`git clone https://github.com${pathname.split(':')[0]}`, { cwd: `./Git` }, (err, stdout, stderr) => {
          if (err) {
            console.log(err)
            res.writeHead(200, { 'Content-Type': 'application/json' })
            return res.end(JSON.stringify({ 'success': true }))
          } else {
            res.writeHead(200, { 'Content-Type': 'application/json' })
            return res.end(JSON.stringify({ 'success': true }))
          }
        })
      }
    })
  } else {
    res.writeHead(200, { 'Content-Type': 'application/json' })
    return res.end(JSON.stringify({ 'success': true }))
  }
}).listen(port);
```

http, exec, url ëª¨ë“ˆë“¤ì„ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ API server ë¥¼ êµ¬ì„±í•˜ì˜€ìŒ. http://localhost:post/repository ë¡œ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë‚ ë¦¬ê²Œ ë˜ë©´, ìë™ìœ¼ë¡œ í’€ë§ë˜ì–´ ë°ì´í„°ë¥¼ ìµœì‹ ìœ¼ë¡œ ìœ ì§€í•˜ëŠ” í˜•ì‹.

GitHubì˜ WebHookì—ì„œ ìœ„ ë§í¬ë¥¼ ë“±ë¡ì‹œí‚¨ í›„, í…ŒìŠ¤íŠ¸í•˜ë‹ˆ ì „ë¶€ ë§¤ë„ëŸ½ê²Œ ë™ì‘í•˜ì˜€ë‹¤..!

forever start main.js ë¡œ ì›¹ ì„œë²„ë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  ì»¤ë°‹ë ë•Œë§ˆë‹¤ ìë™ í’€ë§ë˜ë„ë¡ í•˜ë‹ˆ, ê¸°ì¡´ì˜ ë²ˆê±°ë¡œì›€ì´ ì‚¬ë¼ì ¸ ë§¤ìš° í–‰ë³µí–ˆìŒ.

